<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MSAL Test</title>
</head>
<body>
    <h1>MSAL Initialization Test</h1>
    <div id="status">Initializing...</div>
    <button id="testLogin" disabled>Test Login (Disabled until initialized)</button>
    
    <script type="module">
        import { PublicClientApplication } from 'https://unpkg.com/@azure/msal-browser@4.24.0/lib/msal-browser.min.js';
        
        const msalConfig = {
            auth: {
                clientId: 'test-client-id',
                authority: 'https://test.b2clogin.com/test.onmicrosoft.com/B2C_1_test',
                knownAuthorities: ['https://test.b2clogin.com'],
                redirectUri: window.location.origin,
                postLogoutRedirectUri: window.location.origin,
            },
            cache: {
                cacheLocation: 'localStorage',
                storeAuthStateInCookie: false,
            },
        };
        
        const statusDiv = document.getElementById('status');
        const testButton = document.getElementById('testLogin');
        
        try {
            const msalInstance = new PublicClientApplication(msalConfig);
            
            statusDiv.textContent = 'MSAL instance created, initializing...';
            
            msalInstance.initialize().then(() => {
                statusDiv.textContent = 'MSAL initialized successfully! âœ…';
                statusDiv.style.color = 'green';
                testButton.disabled = false;
                testButton.textContent = 'Test Login (Ready)';
            }).catch((error) => {
                statusDiv.textContent = `MSAL initialization failed: ${error.message}`;
                statusDiv.style.color = 'red';
            });
            
        } catch (error) {
            statusDiv.textContent = `MSAL creation failed: ${error.message}`;
            statusDiv.style.color = 'red';
        }
    </script>
</body>
</html>
